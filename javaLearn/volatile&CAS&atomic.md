



#### happens-before，即先行发生原则，定义了操作A必然先行发生于操作B的一些规则，比如在同一个线程内控制流前面的代码一定先行发生于控制流后面的代码、一个释放锁unlock的动作一定先行发生于后面对于同一个锁进行锁定lock的动作等等，只要符合这些规则，则不需要额外做同步措施，如果某段代码不符合所有的happens-before规则，则这段代码一定是线程非安全的    

#### CAS：Compare and Swap


### 关键字

#### volatile
>1，各个线程会将共享变量从主内存中拷贝到工作内存（缓存），然后执行引擎会基于工作内存中的数据进行操作处理。线程在工作内存进行操作后何时会写到主内存中？这个时机对普通变量是没有规定的，而针对volatile修饰的变量给java虚拟机特殊的约定，线程对volatile变量的修改会立刻被其他线程所感知，即不会出现数据脏读的现象，从而保证数据的“可见性”。被volatile修饰的变量能够保证每个线程能够获取该变量的最新值，从而避免出现数据脏读的现象               
>2，在生成汇编代码时会在volatile修饰的共享变量进行写操作的时候会多出Lock前缀的指令，其影响：1）将当前处理器缓存行的数据写回系统内存，2）这个写回内存的操作会使得其他CPU里缓存了该内存地址的数据无效   