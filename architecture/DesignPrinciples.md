# 设计原则


## 架构设计原则

>1，单一职责原则：修改某个类的理由应该只有一个，如果超过一个，说明类承担不止一个职责，要视情况拆分

>2，开放封闭原则：软件实体应该对扩展开放，对修改封闭

>3，里氏替代原则：当一个子类的实例能够被替换成任何超类的实例时，它们之间才是真正的 is-a 关系

>4，依赖倒置原则：高层模块不应该依赖于底层模块，二者都应该依赖于抽象。换句话说，依赖于抽象，不要依赖于具体实现

>5，接口分离原则：使用多个专门的接口比使用单一的大而全接口要好。

>6，迪米特原则（Law of Demeter）也称最少知识原则：一个软件实体应当尽可能少地与其他实体发生相互作用，通过引入一个合理的第三者降低现有对象之间的耦合度

## 微服务相关原则：
>0.信息专家：当不确定哪个团队应该负责某个微服务时，一般原则也是谁拥有数据谁负责

>1.N + 1 设计：永远不要少于两个，通常为三个。比方说无状态的 Web/API 一般部署至少>=2 个
>2. 回滚设计
>3. 禁用设计：新功能隐藏在动态开关机制 (Feature Switch) 后面，可以按需一键打开，如发现问题随时关闭禁用
>4. 监控设计：在设计阶段就必须考虑监控，而不是在实施完毕之后补充。例如在需求阶段就要考虑关键指标监控项，这就是度量驱动开发 (Metrics Driven Development) 的理念
>5. 设计多活数据中心
>6. 使用成熟的技术
>7. 异步设计：能异步尽量用异步，只有当绝对必要或者无法异步时，才使用同步调用
>8. 设计时至少要有两步前瞻性：在扩展性问题发生前考虑好下一步的行动计划。架构师的价值就体现在这里，架构设计对于流量的增长要有提前量。
>9. 非核心则购买：如果不是你最擅长，也提供不了差异化的竞争优势则直接购买。避免 Not Invented Here 症状，避免凡事都要重造轮子，毕竟达成业务目标才是重点
>10. 小构建、小发布和快试错：全部研发要小构建，不断迭代，让系统不断成长
>11. 隔离故障：实现故障隔离设计，通过断路保护避免故障传播和交叉影响
>12. 自动化：设计和构建自动化的过程。如果机器可以做，就不要依赖于人。自动化是 DevOps 的基础。

## 上线的原则
11. 日志
12. 管理进程
10. 开发环境和线上环境等价：尽可能保持开发、测试、预发和线上环境相同

## 思考的原则
原理一：系统思考 (System Thinking)
原理二：强化反馈环 (Amplify Feedback Loops)
原理三：持续试验和学习的文化 (Culture of Continual Experimentation And Learning)